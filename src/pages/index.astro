---
import Index from "../layouts/Index.astro";
import { filterContent } from "@utils";

const devMode = import.meta.env.DEV;
const postsCap = 5;

const allPages = await Astro.glob("/content/*.md");
const posts = filterContent(await Astro.glob("/content/blog/*.md"));

const sitePages = await Astro.glob("/content/*.md");
const index = sitePages.find((a) => a.frontmatter.title == "index");
const { Content } = index ? index : { Content: undefined };
const pageTitle = index ? index.frontmatter.title : "Post Index";
---

<Index pageTitle={pageTitle} posts={posts}>
  { Content ? <Content /> : "" }
</Index>
