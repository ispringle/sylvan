---
import Index from "@layouts/Index.astro";
import { filterContent } from "@utils";

const devMode = import.meta.env.DEV;

const allPosts = await Astro.glob("/content/blog/*.md");
const posts = filterContent(allPosts);

const index = allPosts.find((a) => a.frontmatter.title == "index");
const { Content } = index ? index : { Content: undefined };
const pageTitle = index ? index.frontmatter.title : "Post Index";
---
<Index pageTitle={pageTitle} posts={posts}>
  {
    Content ? (
      <article>
        <Content />
      </article>
    ) : (
      ""
    )
  }
</Index>
