---
import Page from "@layouts/Page.astro";
import { filterContent, slugify } from "@utils";

export async function getStaticPaths() {
  const devMode = import.meta.env.DEV;
  const posts = filterContent(await Astro.glob("/content/blog/*.md"));

  return posts.map((post) => {
    post.frontmatter.author = post.frontmatter?.author || "Ian S. Pringle"
    return {
      params: { slug: slugify(post.frontmatter.title) },
      props: { post: post},
    };
  });
}

const { post } = Astro.props;
const { Content } = post;
---

<Page frontmatter={post.frontmatter}>
  <Content />
</Page>
