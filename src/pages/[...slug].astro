---
import Base from "@layouts/Base.astro";
import {filterContent, slugify} from "@utils";

export async function getStaticPaths() {
  const devMode = import.meta.env.DEV;
  const pages = filterContent(await Astro.glob("/content/*.md"));
  return pages.map((page) => {
    page.frontmatter.author = page.frontmatter?.author || "Ian S. Pringle"
    return {
      params: { slug: slugify(page.frontmatter.title) },
      props: { page: page},
    };
  });
}

const { page } = Astro.props;
const { Content } = page;
---

<Base pageTitle={page.frontmatter.title}>
  <Content />
</Base>
